{"ast":null,"code":"import _slicedToArray from \"/Users/artticfox/Desktop/Work/frank/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/Users/artticfox/Desktop/Work/frank/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/artticfox/Desktop/Work/frank/frontend/pages/sub/dealerfinder.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  query DEALER_QUERY($search: String) {\\n    allDealers(where: { city_contains: $search }) {\\n      postal\\n      city\\n      venue{\\n        formattedAddress\\n        googlePlaceID\\n        lat\\n        lng\\n      }\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { gql, useLazyQuery } from \"@apollo/client\";\nimport { motion } from \"framer-motion\";\nimport { GoogleMap, useLoadScript } from '@react-google-maps/api';\nimport Loading from \"../../components/global/Loading\";\nimport { Container } from \"../../components/layout/Container\";\nvar DEALER_QUERY = gql(_templateObject());\nvar containerStyle = {\n  width: '100%',\n  height: '400px'\n};\n\nvar DealerFinder = function DealerFinder(props) {\n  _s();\n\n  var _useLazyQuery = useLazyQuery(DEALER_QUERY),\n      _useLazyQuery2 = _slicedToArray(_useLazyQuery, 2),\n      getDealer = _useLazyQuery2[0],\n      _useLazyQuery2$ = _useLazyQuery2[1],\n      data = _useLazyQuery2$.data,\n      loading = _useLazyQuery2$.loading,\n      error = _useLazyQuery2$.error;\n\n  var _useState = useState([]),\n      locations = _useState[0],\n      setLocations = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      searchWord = _useState2[0],\n      setSearchWord = _useState2[1];\n\n  var _useState3 = useState({\n    lat: -3.745,\n    lng: -38.523\n  }),\n      location = _useState3[0],\n      setLocation = _useState3[1];\n\n  useEffect(function () {\n    //call db\n    getDealer();\n    setLocations(data === null || data === void 0 ? void 0 : data.allDealers);\n  }, []);\n  useEffect(function () {\n    //update state with new db after search\n    !loading && setLocations(data === null || data === void 0 ? void 0 : data.allDealers);\n  }); // search the word in db\n\n  var handleRefetch = function handleRefetch() {\n    getDealer({\n      variables: {\n        search: searchWord\n      }\n    });\n  }; //load google map and initilize\n\n\n  var _useLoadScript = useLoadScript({\n    googleMapsApiKey: process.env.NEXT_PUBLIC_GOOGLE_MAP_API\n  }),\n      isLoaded = _useLoadScript.isLoaded,\n      loadError = _useLoadScript.loadError;\n\n  if (loading) return /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 23\n  }, _this);\n  if (error) return \"Error! \".concat(error);\n\n  if (loadError) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Map cannot be loaded right now, sorry.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 12\n    }, _this);\n  }\n\n  var handleChange = function handleChange(e) {\n    setSearchWord(e.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    space: true,\n    padding: true,\n    children: [/*#__PURE__*/_jsxDEV(Left, {\n      children: !loading && locations !== undefined && locations.length !== 0 && locations.map(function (item) {\n        /*#__PURE__*/\n        _jsxDEV(Dealer, {\n          children: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, _this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Right, {\n      children: /*#__PURE__*/_jsxDEV(Fixed, {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Ostaco Windows and Doors products are proudly distributed by many retailers across Ontario. Please fill out this form and our team will quickly get back to you with information on your nearest dealer.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 9\n        }, _this), isLoaded && !loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"test\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(GoogleMap, {\n            mapContainerStyle: containerStyle,\n            center: location,\n            zoom: 10\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, _this);\n}; // const Container = styled(motion.div)`\n//   display: grid;\n//   grid-gap: 1.5em;\n//   @media (min-width: 768px) {\n//     grid-template-columns: 2fr 3fr;\n//   }\n// `;\n\n\n_s(DealerFinder, \"pNEYkwJZINHeJy/RqUxrArdbCpM=\", false, function () {\n  return [useLazyQuery, useLoadScript];\n});\n\n_c = DealerFinder;\nvar LoadingS = motion.custom(styled(Loading).withConfig({\n  displayName: \"dealerfinder__LoadingS\",\n  componentId: \"sc-1ixs21k-0\"\n})([\"\"]));\nvar Left = styled(motion.div).withConfig({\n  displayName: \"dealerfinder__Left\",\n  componentId: \"sc-1ixs21k-1\"\n})([\"display:grid;grid-row:2;@media (min-width:768px){grid-row:1;}\"]);\n_c2 = Left;\nvar Right = styled(motion.div).withConfig({\n  displayName: \"dealerfinder__Right\",\n  componentId: \"sc-1ixs21k-2\"\n})([\"display:grid;@media (min-width:768px){position:relative;}\"]);\n_c3 = Right;\nvar H2 = styled.h2.withConfig({\n  displayName: \"dealerfinder__H2\",\n  componentId: \"sc-1ixs21k-3\"\n})([\"font-size:0.875rem;font-weight:400;max-width:450px;\"]);\nvar Fixed = styled.div.withConfig({\n  displayName: \"dealerfinder__Fixed\",\n  componentId: \"sc-1ixs21k-4\"\n})([\"display:grid;grid-gap:2vh;@media (min-width:768px){position:fixed;width:52.5vw;}\"]);\n_c4 = Fixed;\nvar InputS = styled.input.withConfig({\n  displayName: \"dealerfinder__InputS\",\n  componentId: \"sc-1ixs21k-5\"\n})([\"max-width:450px;\"]);\nvar Content = styled.ul.withConfig({\n  displayName: \"dealerfinder__Content\",\n  componentId: \"sc-1ixs21k-6\"\n})([\"list-style:none;padding-inline-start:0px;display:grid;grid-gap:1.5em;h4{margin:16px 0 0;}\"]);\nvar Dealer = styled.div.withConfig({\n  displayName: \"dealerfinder__Dealer\",\n  componentId: \"sc-1ixs21k-7\"\n})([\"display:grid;grid-gap:0.5em;h6{margin:0;}\"]);\n_c5 = Dealer;\nvar InRow = styled.div.withConfig({\n  displayName: \"dealerfinder__InRow\",\n  componentId: \"sc-1ixs21k-8\"\n})([\"display:grid;grid-auto-flow:column;justify-content:start;align-items:baseline;grid-gap:1em;\"]);\nvar City = styled.div.withConfig({\n  displayName: \"dealerfinder__City\",\n  componentId: \"sc-1ixs21k-9\"\n})([\"h4{grid-column:1/-1;}display:grid;grid-gap:1em;\"]);\nvar Form = styled.form.withConfig({\n  displayName: \"dealerfinder__Form\",\n  componentId: \"sc-1ixs21k-10\"\n})([\"display:grid;\"]);\nexport default DealerFinder;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"DealerFinder\");\n$RefreshReg$(_c2, \"Left\");\n$RefreshReg$(_c3, \"Right\");\n$RefreshReg$(_c4, \"Fixed\");\n$RefreshReg$(_c5, \"Dealer\");","map":{"version":3,"sources":["/Users/artticfox/Desktop/Work/frank/frontend/pages/sub/dealerfinder.tsx"],"names":["useState","useEffect","styled","gql","useLazyQuery","motion","GoogleMap","useLoadScript","Loading","Container","DEALER_QUERY","containerStyle","width","height","DealerFinder","props","getDealer","data","loading","error","locations","setLocations","searchWord","setSearchWord","lat","lng","location","setLocation","allDealers","handleRefetch","variables","search","googleMapsApiKey","process","env","NEXT_PUBLIC_GOOGLE_MAP_API","isLoaded","loadError","handleChange","e","target","value","undefined","length","map","item","name","LoadingS","custom","Left","div","Right","H2","h2","Fixed","InputS","input","Content","ul","Dealer","InRow","City","Form","form"],"mappings":"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","sourcesContent":["import { useState, useEffect, useCallback } from \"react\";\nimport styled from \"styled-components\";\nimport { gql, useLazyQuery } from \"@apollo/client\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { GoogleMap, useLoadScript } from '@react-google-maps/api';\n\nimport Loading from \"../../components/global/Loading\";\nimport { Container } from \"../../components/layout/Container\";\n\nconst DEALER_QUERY = gql`\n  query DEALER_QUERY($search: String) {\n    allDealers(where: { city_contains: $search }) {\n      postal\n      city\n      venue{\n        formattedAddress\n        googlePlaceID\n        lat\n        lng\n      }\n    }\n  }\n`;\n\nconst containerStyle = {\n  width: '100%',\n  height: '400px'\n};\n\n\n\nconst DealerFinder = (props) => {\n  const [getDealer, { data, loading, error}] = useLazyQuery(DEALER_QUERY)\n  const [locations, setLocations] = useState([])\n  const [searchWord, setSearchWord] = useState(\"\")\n  const [location, setLocation] = useState({lat: -3.745,\n    lng: -38.523})\n\n  useEffect(() => {\n    //call db\n    getDealer()\n    setLocations(data?.allDealers)\n  }, [])\n\n  useEffect(() => {\n    //update state with new db after search\n    !loading && setLocations(data?.allDealers)\n  })\n\n  // search the word in db\n  const handleRefetch = () => {\n    getDealer({variables: { search: searchWord }})\n  }\n\n  //load google map and initilize\n  const { isLoaded, loadError } = useLoadScript({\n    googleMapsApiKey: process.env.NEXT_PUBLIC_GOOGLE_MAP_API,\n  })\n\n  if (loading) return <Loading />;\n  if (error) return `Error! ${error}`;\n    \n  if (loadError) {\n    return <div>Map cannot be loaded right now, sorry.</div>\n  }\n\n  const handleChange = (e) => {\n    setSearchWord(e.target.value)\n  }\n\n  return(\n    <Container space padding>\n      <Left>\n      {(!loading && locations !== undefined && locations.length !== 0) &&  \n          \n          \n          locations.map(item => {\n          <Dealer>\n            {item.name}\n          </Dealer>\n            \n          })\n          \n          \n        }\n      </Left>\n        <Right>\n          <Fixed>\n\n      \n        <p>Ostaco Windows and Doors products are proudly distributed by many retailers across Ontario. Please fill out this form and our team will quickly get back to you with information on your nearest dealer.</p>\n        \n        {(isLoaded && !loading) ? (\n          <>\n            <p>test</p>\n            <GoogleMap\n            mapContainerStyle={containerStyle}\n            center={location}\n            zoom={10}\n            >\n              \n            </GoogleMap>\n          </>\n        ) : <Loading /> }\n        \n      \n          </Fixed>\n\n      </Right>\n    </Container>\n  )\n}\n\n\n// const Container = styled(motion.div)`\n//   display: grid;\n//   grid-gap: 1.5em;\n//   @media (min-width: 768px) {\n//     grid-template-columns: 2fr 3fr;\n//   }\n// `;\n\nconst LoadingS = motion.custom(styled(Loading)``)\n\n\nconst Left = styled(motion.div)`\n  display: grid;\n  grid-row: 2;\n  @media (min-width: 768px) {\n    grid-row: 1;\n  }\n`;\n\nconst Right = styled(motion.div)`\n  display: grid;\n  @media (min-width: 768px) {\n    position: relative;\n  }\n`;\n\nconst H2 = styled.h2`\n  font-size: 0.875rem;\n  font-weight: 400;\n  max-width: 450px;\n`;\n\nconst Fixed = styled.div`\n  display: grid;\n  grid-gap: 2vh;\n  @media (min-width: 768px) {\n    position: fixed;\n    width: 52.5vw;\n  }\n`;\n\nconst InputS = styled.input`\n  max-width: 450px;\n`;\n\nconst Content = styled.ul`\n  list-style: none;\n  padding-inline-start: 0px;\n  display: grid;\n  grid-gap: 1.5em;\n  h4 {\n    margin: 16px 0 0;\n  }\n`;\n\nconst Dealer = styled.div`\n  display: grid;\n  grid-gap: 0.5em;\n  h6 {\n    margin: 0;\n  }\n`;\n\nconst InRow = styled.div`\n  display: grid;\n  grid-auto-flow: column;\n  justify-content: start;\n  align-items: baseline;\n  grid-gap: 1em;\n`;\n\nconst City = styled.div`\n  h4 {\n    grid-column: 1/-1;\n  }\n  display: grid;\n  grid-gap: 1em;\n`;\n\nconst Form = styled.form`\n  display: grid;\n`;\n\nexport default DealerFinder;\n"]},"metadata":{},"sourceType":"module"}